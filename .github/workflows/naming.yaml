name: Naming convention checker
on:
  pull_request:
    branches:
      - '*' 
    types: [edited, reopened, ready_for_review, opened]
  push:
    branches:
      - '*'

jobs:
  title_naming_convention:
    name: Check title naming convention
    if: ${{ github.event_name == 'pull_request' }}
    runs-on: ubuntu-latest
    steps:
      - name: Check title convention
        env:
          TITLE: ${{ github.event.pull_request.title }}
        run: |
            if [[ "$TITLE" =~ ^(\[[^\]]*\])+[[:space:]](Feat|Fix|Hotfix|Chore):[[:space:]][[:alnum:][:space:]]+$ ]]
            then
              echo "Pull request title is following the convention" && exit 0
            else
              echo "Pull request title is not following the convention" && exit 1
            fi
name: Naming convention for pull request
on:
  pull_request:
    branches:
      - '*' 
    types: [edited, reopened, ready_for_review, synchronize, opened]

jobs:
  title_naming_convention:
    name: Check naming convention
    runs-on: ubuntu-latest
    steps:
      - name: Check branch name convention
        env:
          BRANCH: ${{ github.event.pull_request.head.ref }}
        run: |
            if [[ "$BRANCH" =~ ^(feat|fix|hotfix|chore)\/[[:alnum:][:space:]]+$ ]]
            then
              echo "Pull request branch name is following the convention" && exit 0
            else
              echo "Pull request branch name is not following the convention" && exit 1
            fi
      - name: Check title name convention
        env:
          TITLE: ${{ github.event.pull_request.title }}
        run: |
            if [[ "$TITLE" =~ ^(\[[^\]]*\])+[[:space:]](Feat|Fix|Hotfix|Chore):[[:space:]][[:alnum:][:space:]]+$ ]]
            then
              echo "Pull request title is following the convention" && exit 0
            else
              echo "Pull request title is not following the convention" && exit 1
            fi
